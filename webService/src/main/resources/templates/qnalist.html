<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Asklepios</title>
    <script
			src="https://kit.fontawesome.com/68dda164c0.js"
			crossorigin="anonymous"
    ></script>
  <link rel="stylesheet" href="CSS/home.css" />
  <link rel="icon" href="Img/logo_icon.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <style>
    .tenada {
      font-family: 'Tenada', 'sans-serif';
    }
    #intro {
      width: 1200px;
      height: 600px;
      background: #3b82f6;
      box-shadow: 0px 5px 15px 5px rgba(0, 0, 0, 0.5)
    }
    .introTitle {
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 50px;
      font-weight: bold;
      color: white;
      position: relative;
      top: 50px;
      left: 60px;
    }
    .introSubject {
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 35px;
      color: white;
      position: relative;
      top: -1830px;
      left: 60px;
    }
    .introLogo {
      font-family: 'Tenada', 'sans-serif';
      font-size: 70px;
      font-weight: bold;
      color: white;
      position: relative;
      top: -1720px;
      left: 60px;
      }
    #slideOne{
      width: 500px;
      position: relative;
      top: -75px;
      left: 650px;
    }
    #slideTwo{
      width: 500px;
      position: relative;
      top: -525px;
      left: 650px;
    }
    #slideThree{
      width: 500px;
      position: relative;
      top: -1010px;
      left: 650px;
    }
    #slideFour{
      width: 500px;
      position: relative;
      top: -1505px;
      left: 650px;
    }
    #popularHospital{
      width: 1150px;
      height: 500px;
      background: white;
      margin-top: 150px;
      margin-left: 50px;
      padding-top: 60px;
      box-shadow: -1px 2px 15px 5px rgba(0, 0, 0, 0.2);
    }
    .popularTitle{
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 50px;
      font-weight: bold;
      color: #3b82f6;
      position: relative;
      top: -385px;
      left: 620px;
      width: 500px;
    }
    .popularSubject {
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 35px;
      color: #3b82f6;
      position: relative;
      top: -370px;
      left: 620px;
      width: 500px;
    }
    .popularEnd{
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 35px;
      color: #3b82f6;
      position: relative;
      top: -330px;
      left: 620px;
      width: 500px;
    }
    #rank{
      position: relative;
      left: 60px;
    }
    #first {
      font-family: 'Pretendard-Regular', 'sans-serif';
      position: relative;
      width: 500px;
      height: 60px;
      background: #2F568A;
      margin-bottom: 20px;
      padding-left: 20px;
      font-size: 30px;
      color: white;
      align-content: center;
      border-top-right-radius: 100px;
      border-bottom-right-radius: 100px;
    }
    #second {
      font-family: 'Pretendard-Regular', 'sans-serif';
      position: relative;
      width: 450px;
      height: 60px;
      background: #4075BC;
      margin-bottom: 20px;
      padding-left: 20px;
      font-size: 30px;
      color: white;
      align-content: center;
      border-top-right-radius: 100px;
      border-bottom-right-radius: 100px;
    }
    #third{
      font-family: 'Pretendard-Regular', 'sans-serif';
      position: relative;
      width: 400px;
      height: 60px;
      background: #5B88C5;
      margin-bottom: 20px;
      padding-left: 20px;
      font-size: 30px;
      color: white;
      align-content: center;
      border-top-right-radius: 100px;
      border-bottom-right-radius: 100px;
    }
    #forth{
      font-family: 'Pretendard-Regular', 'sans-serif';
      position: relative;
      width: 350px;
      height: 60px;
      background: #769CCF;
      margin-bottom: 20px;
      padding-left: 20px;
      font-size: 30px;
      color: white;
      align-content: center;
      border-top-right-radius: 100px;
      border-bottom-right-radius: 100px;
    }
    #fifth {
      font-family: 'Pretendard-Regular', 'sans-serif';
      position: relative;
      width: 300px;
      height: 60px;
      background: #91B0D8;
      padding-left: 20px;
      font-size: 30px;
      color: white;
      align-content: center;
      border-top-right-radius: 100px;
      border-bottom-right-radius: 100px;
    }
    #review{
      width: 1150px;
      height: 500px;
      background: #3b82f6;
      margin-top: 150px;
      margin-right: 50px;
      box-shadow: 0px 5px 15px 5px rgba(0, 0, 0, 0.5)
    }
    #reviewImage {
      width: 500px;
      position: relative;
      top: -320px;
      left: 580px;
    }
    .reviewTitle{
      width: 550px;
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 50px;
      font-weight: bold;
      color: white;
      position: relative;
      left: 60px;
      top: 50px;
    }
    .reviewSubject{
      width: 550px;
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 35px;
      color: white;
      position: relative;
      left: 60px;
      top: 100px;
    }
    #membership{
      width: 1200px;
      height: 700px;
      background: white;
      margin-top: 150px;
      box-shadow: 0px 5px 15px 5px rgba(0, 0, 0, 0.5)
    }
    #membershipImage{
      position: relative;
      top: 40px;
      left: 115px;
    }
    .membershipTitle{
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 50px;
      font-weight: bold;
      color: #3b82f6;
      position: relative;
      top: 30px;
      text-align: center;
    }
    .membershipSubject{
      font-family: 'Pretendard-Regular', 'sans-serif';
      font-size: 35px;
      color: #3b82f6;
      position: relative;
      top: 70px;
      text-align: center;
      padding: 5px;
    }
    .animate-on-left {
      opacity: 0;
      transform: translateX(-20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-right {
      opacity: 0;
      transform: translateX(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-top {
      opacity: 0;
      transform: translateY(-20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-bottom {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    .animate-on-left.show, .animate-on-right.show, .animate-on-top.show, .animate-on-bottom.show {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body>
<div th:replace="~{include/topinclude}"></div>
<div class="homeContainer" style="height: 2900px;">
  <div class="max-w-5xl w-4/5 mx-auto bg-white p-6 rounded-lg shadow-lg mt-6">
    <h2 class="text-2xl font-bold mb-4">게시글 목록</h2>
    <div class="overflow-y-auto h-[500px] space-y-4">
      <div class="p-4 border rounded-lg shadow-md" th:each="post : ${posts}">
        <h3 class="text-lg font-bold" th:text="${post.title}"></h3>
        <p class="text-gray-700" th:text="${#strings.length(post.content) > 50 ? #strings.substring(post.content, 0, 50) + '...' : post.content}"></p>
        <div class="mt-2 text-blue-500" th:text="${post.tags}"></div>
      </div>
    </div>
  </div>
  <aside style="margin-right: 50px; margin-top: 10px;" id="aside2" th:insert="~{include/quickmenuinclude}"></aside>
</div>
<!--동준 => 광고 집어넣을거면 여기에 추가-->
<!--<footer id="ad">-->
<!--  <h1>광고</h1>-->
<!--</footer>-->
<footer id="footer" th:replace="~{include/footer}">
</footer>
</body>
</html>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script type="text/javascript">
  window.onload = function () {
    $.ajax({
      url: '/asklepios/popularHospital',
      type: 'post',
      success: function (data) {
        let ids = ["first", "second", "third", "forth", "fifth"];
        data.forEach((value, index) => {
          let element = document.getElementById(ids[index]);
          if (element) {
            element.textContent = index + 1 + ". " + value;
          }
        });
      },
      error: function () {
        alert("error");
      }
    })
    let slides = ['#slideOne', '#slideTwo', '#slideThree', '#slideFour'];
    let slideIndex = 0;

    // 모든 이미지 opacity 설정 (안보이게) 근데 첫 이미지는 보여야 함
    document.querySelector("#slideOne").style.opacity = 1;
    document.querySelector("#slideTwo").style.opacity = 0;
    document.querySelector("#slideThree").style.opacity = 0;
    document.querySelector("#slideFour").style.opacity = 0;

    // 점차 이미지 나타나게하기
    function fadeIn(slideImg) {
      let opacity = 0;
      let fadeInInterval = setInterval(() => {
        opacity += 0.01;
        slideImg.style.opacity = opacity;
        if (opacity >= 1) {
          clearInterval(fadeInInterval);
        }
      }, 10); // 0.1초마다 opacity 증가
    }

    // 점차 이미지 사라지게하기
    function fadeOut(slideImg) {
      let opacity = 1;
      let fadeOutInterval = setInterval(() => {
        opacity -= 0.01;
        slideImg.style.opacity = opacity;
        if (opacity <= 0) {
          clearInterval(fadeOutInterval);
        }
      }, 10);
    }

    function showSlide() {
      let prevSlide = document.querySelector(slides[slideIndex]);
      if (prevSlide){
        fadeOut(prevSlide);
      }

      // 계속 돌리기 위해 나머지 구현
      slideIndex = (slideIndex + 1) % slides.length;

      let nextSlide = document.querySelector(slides[slideIndex]);
      if (nextSlide){
        fadeIn(nextSlide);
      }

    }

    // 4초 간격으로 슬라이드 전환
    setInterval(showSlide, 3000); // 2초 페이드 아웃 + 2초 페이드 인

  }

  document.addEventListener('DOMContentLoaded', () => {
    let observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
          observer.unobserve(entry.target); // 애니메이션 완료 후 더 이상 관찰하지 않음
        }
      });
    }, {
      threshold: 1 // 요소가 60% 화면에 보이면 트리거
    });

    // 애니메이션 대상 선택
    document.querySelectorAll('.animate-on-left').forEach(el => {
      observer.observe(el);
    });
    document.querySelectorAll('.animate-on-right').forEach(el => {
      observer.observe(el);
    });
    document.querySelectorAll('.animate-on-top').forEach(el => {
      observer.observe(el);
    });
    document.querySelectorAll('.animate-on-bottom').forEach(el => {
      observer.observe(el);
    });
  });

</script>
